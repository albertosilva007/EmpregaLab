<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Trilhas de Desenvolvimento</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #faf5ff 0%, #eff6ff 50%, #f0fdf4 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1024px;
            margin: 0 auto;
            padding: 1rem;
        }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .header {
            padding: 1.5rem;
            border-bottom: 4px solid #a855f7;
            border-radius: 1rem 1rem 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .icon-container {
            background: #a855f7;
            padding: 0.75rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-container svg {
            width: 24px;
            height: 24px;
            color: white;
            stroke: white;
            fill: none;
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .user-info {
            text-align: right;
        }

        .user-label {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .user-name {
            font-weight: 600;
            color: #a855f7;
        }

        .messages-container {
            padding: 1.5rem;
            height: 600px;
            overflow-y: auto;
        }

        .message-wrapper {
            display: flex;
            margin-bottom: 1rem;
        }

        .message-wrapper.user {
            justify-content: flex-end;
        }

        .message-wrapper.bot {
            justify-content: flex-start;
        }

        .message {
            max-width: 80%;
        }

        .message-bubble {
            padding: 1rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre-line;
        }

        .message-bubble.user {
            background: #a855f7;
            color: white;
            border-bottom-right-radius: 0;
        }

        .message-bubble.bot {
            background: #f3f4f6;
            color: #1f2937;
            border-bottom-left-radius: 0;
        }

        .message-timestamp {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.25rem;
        }

        .message-timestamp.user {
            text-align: right;
        }

        .options-container {
            margin-top: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .option-button {
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            background: white;
            border: 2px solid #e9d5ff;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-button:hover {
            border-color: #a855f7;
            background: #faf5ff;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .module-card {
            padding: 1.5rem;
            background: linear-gradient(135deg, white 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .module-card:hover {
            border-color: #a855f7;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .module-icon {
            padding: 1rem;
            border-radius: 0.75rem;
            transition: transform 0.3s;
            flex-shrink: 0;
        }

        .module-card:hover .module-icon {
            transform: scale(1.1);
        }

        .module-icon svg {
            width: 32px;
            height: 32px;
            color: white;
            stroke: white;
            fill: none;
        }

        .module-icon.yellow {
            background: #eab308;
        }

        .module-icon.blue {
            background: #3b82f6;
        }

        .module-icon.green {
            background: #22c55e;
        }

        .module-icon.purple {
            background: #a855f7;
        }

        .module-content {
            flex: 1;
        }

        .module-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .module-title {
            font-weight: bold;
            color: #1f2937;
            font-size: 0.95rem;
        }

        .module-emoji {
            font-size: 1.5rem;
        }

        .module-description {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .typing-indicator {
            display: flex;
            justify-content: flex-start;
        }

        .typing-bubble {
            background: #f3f4f6;
            border-radius: 1rem;
            border-bottom-left-radius: 0;
            padding: 1rem;
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
        }

        .input-area {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            border-radius: 0 0 1rem 1rem;
        }

        .input-container {
            display: flex;
            gap: 0.5rem;
        }

        .text-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .text-input:focus {
            border-color: #a855f7;
        }

        .send-button {
            padding: 0.75rem 1.5rem;
            background: #a855f7;
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }

        .send-button:hover {
            background: #9333ea;
        }

        .info-text {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: center;
        }

        @media (max-width: 768px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .messages-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Ãcones SVG
        const MessageCircle = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const TrendingUp = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const Users = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const Target = () => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
            </svg>
        );

        const ChatbotTrilhas = () => {
          const [messages, setMessages] = useState([]);
          const [currentStep, setCurrentStep] = useState('menu');
          const [currentModule, setCurrentModule] = useState(null);
          const [userName, setUserName] = useState('');
          const [waitingForResponse, setWaitingForResponse] = useState(false);
          const messagesEndRef = useRef(null);
          const inputRef = useRef(null);

          const modules = {
    inteligencia: {
        name: "InteligÃªncia Emocional",
        image: "inteligencia.png",
        color: "pink",
        emoji: "",
        description: "Desenvolva autoconhecimento emocional e autorregulaÃ§Ã£o"
    },
    adaptabilidade: {
        name: "Adaptabilidade e ResiliÃªncia",
        image: "adaptabilidade.png",
        color: "green",
        emoji: "",
        description: "FortaleÃ§a sua capacidade de enfrentar desafios"
    },
    lideranca: {
        name: "LideranÃ§a e Trabalho em Equipe",
        image: "lideranca.png",
        color: "blue",
        emoji: "",
        description: "Desenvolva habilidades de lideranÃ§a e trabalho colaborativo"
    },
    comunicacao: {
        name: "ComunicaÃ§Ã£o Inclusiva",
        image: "comunicacao.png",
        color: "purple",
        emoji: "",
        description: "Aprenda a se comunicar de forma clara e respeitosa"
    },
    produtividade: {
        name: "Produtividade e Aprendizagem",
        image: "produtividade.png",
        color: "yellow",
        emoji: "",
        description: "Aprenda a ser mais produtivo e desenvolver aprendizado contÃ­nuo"
    },
    simulacoes: {
        name: "SimulaÃ§Ãµes de Entrevista",
        image: "comunicacao.png",
        color: "orange",
        emoji: "ðŸŽ¤",
        description: "Pratique entrevistas e receba feedback com IA"
    }
};

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          useEffect(() => {
            addBotMessage('Oi! Bem-vindo ao Chat das Trilhas de Desenvolvimento! ðŸ˜Š\n\nQual seu nome?');
          }, []);

          const addBotMessage = (text, options = null, delay = 500) => {
            setTimeout(() => {
              setMessages(prev => [...prev, { 
                type: 'bot', 
                text, 
                options,
                timestamp: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })
              }]);
              setWaitingForResponse(false);
            }, delay);
          };

          const addUserMessage = (text) => {
            setMessages(prev => [...prev, { 
              type: 'user', 
              text,
              timestamp: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })
            }]);
            setWaitingForResponse(true);
          };

          const handleUserInput = (input) => {
            addUserMessage(input);

            if (currentStep === 'menu' && !userName) {
              setUserName(input);
              setTimeout(() => {
                addBotMessage(`Prazer, ${input}! ðŸ‘‹\n\nEscolha uma trilha para comeÃ§armos:`);
                setCurrentStep('selectModule');
              }, 800);
              return;
            }

            // Processar resposta baseado no mÃ³dulo e step
            processModuleFlow(input);
          };

          const processModuleFlow = (input) => {
            // SeleÃ§Ã£o de mÃ³dulo
            if (currentStep === 'selectModule' && !currentModule) {
              if (input === 'produtividade') {
                setCurrentModule('produtividade');
                setCurrentStep('prod_intro');
                addBotMessage(
                  'Me diga uma coisaâ€¦ jÃ¡ teve dia que vocÃª trabalhou o dia todinho e no fim pensou:\n\n"Oxente, fiz tanto e parece que nÃ£o fiz nada"? ðŸ˜…\n\nPois Ã©! Ã€s vezes a gente corre demais e esquece de pensar se tÃ¡ correndo pro lado certo.\nProdutividade nÃ£o Ã© fazer tudo â€” Ã© fazer o que realmente importa.'
                );
                setTimeout(() => {
                  addBotMessage('E quando as tarefas acumulam, como Ã© que vocÃª reage?', [
                    { label: 'Fico agoniado e tento resolver tudo de uma vez ðŸ˜°', value: 'a' },
                    { label: 'FaÃ§o o que dÃ¡, um de cada vez ðŸ˜…', value: 'b' },
                    { label: 'Me organizo e planejo o que Ã© mais importante ðŸ’ª', value: 'c' }
                  ], 1500);
                }, 1000);
              } else if (input === 'lideranca') {
                setCurrentModule('lideranca');
                setCurrentStep('lid_intro');
                addBotMessage(
                  'Rapaz, jÃ¡ viu como Ã© puxado liderar gente diferente?\nCada um pensa de um jeito, fala de outro e reage de outro.\nMas Ã© aÃ­ que mora a beleza: liderar Ã© entender pessoas, nÃ£o controlar tarefas.\n\nBora bater um papo sobre isso?'
                );
                setTimeout(() => {
                  addBotMessage('Quando vocÃª pensa em um bom lÃ­der, o que vem na cabeÃ§a?', [
                    { label: 'DÃ¡ o exemplo', value: 'exemplo' },
                    { label: 'Escuta e apoia', value: 'escuta' },
                    { label: 'Motiva o grupo', value: 'motiva' },
                    { label: 'Cobra demais', value: 'cobra' }
                  ], 1500);
                }, 1000);
              } else if (input === 'adaptabilidade') {
                setCurrentModule('adaptabilidade');
                setCurrentStep('adapt_intro');
                addBotMessage(
                  'Conhece o mandacaru, nÃ©? Aquele que cresce firme no meio da seca, mas quando a chuva vem, floresce bonito? ðŸŒµ\n\nPois Ã©, hoje a conversa Ã© sobre ser assim tambÃ©m: resistente e cheio de vida!\n\nNa vida, nem tudo sai como a gente planeja.\nÃ€s vezes o patrÃ£o muda o horÃ¡rio, a venda cai, o Ã´nibus atrasa, ou aparece um problema que ninguÃ©m esperava.'
                );
                setTimeout(() => {
                  addBotMessage('Quando aparece um imprevisto, qual dessas frases parece mais com vocÃª?', [
                    { label: 'Desespero logo, fico sem saber o que fazer ðŸ˜°', value: 'desespero' },
                    { label: 'Reclamo, mas depois dou um jeito ðŸ˜…', value: 'reclamo' },
                    { label: 'Penso positivo e me viro como posso ðŸ’ª', value: 'pensopositivo' }
                  ], 1500);
                }, 1000);
             } else if (input === 'comunicacao') {
  setCurrentModule('comunicacao');
  setCurrentStep('com_intro');
  addBotMessage(
    'Me diga uma coisaâ€¦ vocÃª jÃ¡ tentou explicar algo pra alguÃ©m e a pessoa entendeu tudinho errado?\n\nOu falou com outra pessoa e parecia que ela tava falando outra lÃ­ngua?\n\nPois Ã©â€¦ comunicaÃ§Ã£o nÃ£o Ã© sÃ³ falar.\nÃ‰ fazer o outro compreender.'
  );
  setTimeout(() => {
    addBotMessage('E quando vocÃª conversa com pessoas de idades diferentes (jovens, adultos, idosos), como Ã© que vocÃª costuma agir?', [
      { label: 'Falo do mesmo jeito com todo mundo ðŸ˜', value: 'com_igual' },
      { label: 'Tento mudar o jeito de explicar ðŸ”„', value: 'com_mudo' },
      { label: 'Fico meio perdido, sem saber como falar ðŸ˜•', value: 'com_perdido' }
    ]);
  }, 1000);
} else if (input === 'simulacoes') {
  window.location.href = '/simulacao-entrevista/simulacao-entrevista.html';
}
                setTimeout(() => {
                  addBotMessage('E quando vocÃª conversa com pessoas de idades diferentes, jovens, adultos, idosos, como Ã© que vocÃª costuma agir?', [
                    { label: 'Falo do mesmo jeito com todo mundo', value: 'mesmo_jeito' },
                    { label: 'Tento mudar o jeito de explicar', value: 'mudo_jeito' },
                    { label: 'Fico meio perdido, sem saber como falar', value: 'perdido' }
                  ], 1500);
                }, 1000);
              } else {
                setCurrentModule(input);
                const module = modules[input];
                addBotMessage(`VocÃª escolheu: ${module.name} ${module.emoji}\n\nEm breve disponÃ­vel com conteÃºdo completo!`, null, 1000);
                setTimeout(() => {
                  addBotMessage('Quer explorar outra trilha?', [
                    { label: 'ðŸŽ¯ Voltar ao menu', value: 'menu' },
                    { label: 'ðŸ Produtividade', value: 'ir_produtividade' },
                    { label: 'âš½ LideranÃ§a', value: 'ir_lideranca' },
                    { label: 'ðŸŒµ Adaptabilidade', value: 'ir_adaptabilidade' }
                  ], 2000);
                }, 1000);
              }
              return;
            }

            // Fluxo da trilha de Produtividade
            if (currentModule === 'produtividade') {
              if (currentStep === 'prod_intro') {
                let response = '';
                if (input === 'a') response = 'Vixe, quem nunca? Mas sabia que isso mais atrapalha do que ajuda? O segredo Ã© respirar e comeÃ§ar por uma coisa sÃ³.';
                else if (input === 'b') response = 'JÃ¡ Ã© um passo! Um de cada vez, o que importa Ã© nÃ£o parar.';
                else if (input === 'c') response = 'Arretado! Produtividade comeÃ§a na clareza, e nÃ£o na pressa.';
                
                addBotMessage(response);
                setTimeout(() => {
                  addBotMessage(
                    'Produtividade Ã© igual receita de bolo: se tentar fazer tudo de uma vez, queima. ðŸ°\nTem que medir, misturar e esperar o tempo certo.\n\nMas afinal, o que Ã© produtividade?\n\nÃ‰ saber usar o tempo e os recursos de forma eficiente pra fazer o que tem valor â€” sem se acabar de cansaÃ§o.\nÃ‰ trabalhar com propÃ³sito e foco, e nÃ£o no automÃ¡tico.\n\nJÃ¡ a aprendizagem contÃ­nua Ã© a vontade de nunca parar de aprender â€” Ã© manter a cabeÃ§a curiosa, aberta ao novo e disposta a melhorar sempre um pouquinho.\n\nQuem junta as duas coisas, cresce igual planta boa em terra fÃ©rtil: firme, produtiva e sempre florescendo. ðŸŒ±'
                  );
                  setCurrentStep('prod_historia');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    'Pra deixar isso mais claro, deixa eu te contar o caso de seu Pedro, agricultor lÃ¡ de Arcoverde. ðŸŒ¾\n\nEle sempre plantou feijÃ£o e milho do mesmo jeito, seguindo o costume do pai.\nMas nos Ãºltimos anos, a chuva andou diferente e a colheita comeÃ§ou a cair.\n\nEm vez de desistir, seu Pedro procurou o pessoal da cooperativa, aprendeu sobre irrigaÃ§Ã£o por gotejamento e comeÃ§ou a testar um novo jeito de plantar.\n\nNo comeÃ§o, achou difÃ­cil â€” mas foi insistindo, anotando os resultados e aprendendo com os erros.\nHoje, colhe mais com menos gasto de Ã¡gua e ainda ensina os vizinhos a fazer o mesmo. ðŸ’§ðŸŒ½\n\nIsso Ã© produtividade e aprendizagem contÃ­nua: melhorar o que jÃ¡ sabe e continuar aprendendo pra fazer ainda melhor.'
                  );
                }, 4000);
                setTimeout(() => {
                  addBotMessage(
                    'Uma dica boa Ã© o mÃ©todo dos 25 minutos â€” vocÃª trabalha focado esse tempo, faz uma pausa de 5 minutos e depois volta.\nO cÃ©rebro agradece e o corpo tambÃ©m.\n\nMas Ã³, nÃ£o adianta sÃ³ produzirâ€¦ tem que aprender sempre tambÃ©m.\nA vida muda num piscar de olhos, e quem fica parado perde o ritmo.\n\nVocÃª costuma buscar aprender coisas novas no dia a dia?',
                    [
                      { label: 'Sim, gosto de aprender todo dia', value: 'aprende_sim' },
                      { label: 'Ã€s vezes, quando sobra tempo', value: 'aprende_as_vezes' },
                      { label: 'Quase nunca, tÃ´ sempre na correria', value: 'aprende_nunca' }
                    ]
                  );
                }, 6000);
              }
              else if (currentStep === 'prod_historia') {
                let respAprendizado = '';
                if (input === 'aprende_sim') respAprendizado = 'Que beleza! Isso Ã© o que te mantÃ©m crescendo e com a mente viva.';
                else if (input === 'aprende_as_vezes') respAprendizado = 'Perfeito! Mas tente ver o aprendizado como parte da rotina, nÃ£o sÃ³ quando dÃ¡.';
                else if (input === 'aprende_nunca') respAprendizado = 'Eu sei! Mas atÃ© no meio da correria dÃ¡ pra aprender algo â€” basta prestar atenÃ§Ã£o.';
                
                addBotMessage(respAprendizado);
                setTimeout(() => {
                  addBotMessage(
                    'Agora, quero te lanÃ§ar o Desafio da Abelha Trabalhadeira ðŸ\n\nPega um papel (ou o celular mesmo) e anota:\n\na) Uma coisa que vocÃª quer aprender ainda este mÃªs.\nb) Um hÃ¡bito que quer melhorar pra render mais.\n\nDepois, pense:\n"O que posso fazer hoje pra comeÃ§ar?"\n\nVocÃª aceita o desafio?',
                    [
                      { label: 'Aceito! Vou fazer isso hoje', value: 'desafio_sim' },
                      { label: 'Vou pensar com calma', value: 'desafio_pensar' }
                    ]
                  );
                  setCurrentStep('prod_desafio');
                }, 2000);
              }
              else if (currentStep === 'prod_desafio') {
                let respDesafio = input === 'desafio_sim' 
                  ? 'Maravilha! Um passo pequeno por dia vale mais que um grande sÃ³ na vontade.' 
                  : 'Arretado! A mudanÃ§a comeÃ§a quando a gente decide cuidar da rotina.';
                
                addBotMessage(respDesafio);
                setTimeout(() => {
                  addBotMessage(
                    'Produtividade e aprendizado andam juntos, visse?\nNÃ£o adianta sÃ³ correr, tem que saber pra onde tÃ¡ indo â€” e aproveitar o caminho pra crescer.\n\nQual dessas frases combina mais com seu jeito de trabalhar?',
                    [
                      { label: 'Devagar, mas constante', value: 'devagar' },
                      { label: 'FaÃ§o mil coisas ao mesmo tempo', value: 'mil_coisas' },
                      { label: 'Gosto de planejar e executar', value: 'planejar' }
                    ]
                  );
                  setCurrentStep('prod_final');
                }, 2000);
              }
              else if (currentStep === 'prod_final') {
                let respFinal = '';
                if (input === 'devagar') respFinal = 'Perfeito! ConstÃ¢ncia vale mais que velocidade.';
                else if (input === 'mil_coisas') respFinal = 'Cuidado pra nÃ£o cansar antes da linha de chegada.';
                else if (input === 'planejar') respFinal = 'AÃ­ sim! Isso Ã© produtividade inteligente.';
                
                addBotMessage(respFinal);
                setTimeout(() => {
                  addBotMessage(
                    'EntÃ£o, meu povo, lembrem-se: ser produtivo nÃ£o Ã© ser apressado, Ã© ser intencional.\nE aprender sempre Ã© o que faz a gente florescer de novo, toda vez que o mundo muda. ðŸŒ»\n\nQuando o cansaÃ§o bater, pare um pouco, respire e lembre:\n\nAtÃ© a abelha descansa entre uma flor e outra â€” mas nunca deixa de buscar o mel. ðŸ¯\n\nâœ… MÃ³dulo concluÃ­do!'
                  );
                  setCurrentStep('modulo_concluido');
                }, 2000);
                setTimeout(() => {
                  addBotMessage('Quer explorar outro mÃ³dulo?', [
                    { label: 'ðŸŽ¯ Voltar ao menu', value: 'menu' },
                    { label: 'âš½ LideranÃ§a e Trabalho em Equipe', value: 'ir_lideranca' }
                  ]);
                }, 4000);
              }
              else if (currentStep === 'modulo_concluido') {
                if (input === 'menu') {
                  resetToMenu();
                } else if (input === 'ir_lideranca') {
                  setCurrentModule('lideranca');
                  setCurrentStep('lid_intro');
                  addBotMessage(
                    'Rapaz, jÃ¡ viu como Ã© puxado liderar gente diferente?\nCada um pensa de um jeito, fala de outro e reage de outro.\nMas Ã© aÃ­ que mora a beleza: liderar Ã© entender pessoas, nÃ£o controlar tarefas.\n\nBora bater um papo sobre isso?'
                  );
                  setTimeout(() => {
                    addBotMessage('Quando vocÃª pensa em um bom lÃ­der, o que vem na cabeÃ§a?', [
                      { label: 'DÃ¡ o exemplo', value: 'exemplo' },
                      { label: 'Escuta e apoia', value: 'escuta' },
                      { label: 'Motiva o grupo', value: 'motiva' },
                      { label: 'Cobra demais', value: 'cobra' }
                    ], 1500);
                  }, 1000);
                }
              }
              return;
            }

            // Fluxo da trilha de LideranÃ§a
            if (currentModule === 'lideranca') {
              if (currentStep === 'lid_intro') {
                let response = '';
                if (input === 'exemplo') response = 'Show! Liderar Ã© mais sobre atitude do que sobre cargo.';
                else if (input === 'escuta') response = 'Isso Ã© ouro! Um bom lÃ­der Ã© aquele que sabe ouvir o que nÃ£o Ã© dito.';
                else if (input === 'motiva') response = 'Perfeito! MotivaÃ§Ã£o vem do propÃ³sito.';
                else if (input === 'cobra') response = 'Cuidado, lÃ­der que sÃ³ cobra cria medo, nÃ£o confianÃ§a.';
                
                addBotMessage(response);
                setTimeout(() => {
                  addBotMessage(
                    'Sabia que o lÃ­der nÃ£o precisa ter todas as respostas?\nO segredo tÃ¡ em construir junto.\n\nExiste um estilo de lideranÃ§a chamado lideranÃ§a servidora, que foca em ajudar o time a crescer.\nÃ‰ tipo o capitÃ£o do time que joga junto, incentiva e comemora cada vitÃ³ria da equipe. âš½'
                  );
                  setCurrentStep('lid_bastao');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    '**O desafio do bastÃ£o** ðŸƒ\n\nImagina uma corrida de revezamento. Se o corredor nÃ£o passar bem o bastÃ£o, o time perde tempo, nÃ©?\nNa equipe Ã© igual: comunicaÃ§Ã£o e confianÃ§a sÃ£o o bastÃ£o.\n\nO que mais atrapalha sua equipe hoje?',
                    [
                      { label: 'Falta de diÃ¡logo', value: 'dialogo' },
                      { label: 'Falta de confianÃ§a', value: 'confianca' },
                      { label: 'Ego e competiÃ§Ã£o', value: 'ego' },
                      { label: 'Falta de clareza nas tarefas', value: 'clareza' }
                    ]
                  );
                }, 4000);
              }
              else if (currentStep === 'lid_bastao') {
                let respBastao = '';
                if (input === 'dialogo') respBastao = 'Bora conversar mais e evitar suposiÃ§Ãµes.';
                else if (input === 'confianca') respBastao = 'ConfianÃ§a nasce de pequenas entregas cumpridas.';
                else if (input === 'ego') respBastao = 'Equipe nÃ£o Ã© corrida de quem brilha mais, Ã© coreografia.';
                else if (input === 'clareza') respBastao = 'ComunicaÃ§Ã£o clara Ã© o primeiro ato de lideranÃ§a.';
                
                addBotMessage(respBastao);
                setTimeout(() => {
                  addBotMessage(
                    'Agora pare um pouco e pense:\nComo vocÃª reage quando o grupo nÃ£o te ouve ou nÃ£o faz o que vocÃª pediu?',
                    [
                      { label: 'Fico bravo(a) e resolvo sozinho', value: 'resolvo_sozinho' },
                      { label: 'Tento conversar e entender', value: 'converso' },
                      { label: 'Desisto e deixo pra lÃ¡', value: 'desisto' },
                      { label: 'PeÃ§o ajuda e redistribuo', value: 'peco_ajuda' }
                    ]
                  );
                  setCurrentStep('lid_reacao');
                }, 2000);
              }
              else if (currentStep === 'lid_reacao') {
                let respReacao = '';
                if (input === 'resolvo_sozinho') respReacao = 'Cuidado! Isso desmotiva o grupo e te sobrecarrega.';
                else if (input === 'converso') respReacao = 'Boa! ComunicaÃ§Ã£o resolve 80% dos conflitos.';
                else if (input === 'desisto') respReacao = 'Evitar conflito tambÃ©m Ã© uma escolha, mas pode custar caro depois.';
                else if (input === 'peco_ajuda') respReacao = 'Excelente! LÃ­der que pede ajuda mostra forÃ§a, nÃ£o fraqueza.';
                
                addBotMessage(respReacao);
                setTimeout(() => {
                  addBotMessage(
                    'Sabe o que diferencia o lÃ­der bom do lÃ­der incrÃ­vel?\nO **feedback com empatia**.\nSaber dizer a verdade sem machucar e elogiar sem bajular.\n\nExemplo:\n"Maria, percebi que vocÃª se esforÃ§ou muito nesse projeto. Que tal ajustarmos juntos esse ponto aqui?"\n\nBora tentar dar um feedback hoje pra alguÃ©m do seu grupo?',
                    [
                      { label: 'Bora! Vou fazer isso', value: 'feedback_sim' },
                      { label: 'Fico sem jeito...', value: 'feedback_sem_jeito' }
                    ]
                  );
                  setCurrentStep('lid_feedback');
                }, 2000);
              }
              else if (currentStep === 'lid_feedback') {
                let respFeedback = input === 'feedback_sim'
                  ? 'Excelente! Escolha um colega e diga algo que ele fez bem. Depois, se couber, uma sugestÃ£o de melhoria.'
                  : 'Normal! Comece elogiando, o resto vem naturalmente. ðŸ˜Š';
                
                addBotMessage(respFeedback);
                setTimeout(() => {
                  addBotMessage(
                    '**Desafio do dia:** ðŸŽ¯\n\n1. Escolha alguÃ©m do grupo.\n2. FaÃ§a uma pergunta poderosa:\n   "O que posso fazer pra te ajudar no seu trabalho?"\n3. Escute de verdade.\n\nEsse simples gesto Ã© o que cria lÃ­deres de verdade.'
                  );
                  setCurrentStep('lid_final');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    'Continue praticando:\n\nâ€¢ Escute mais do que fala\nâ€¢ ReconheÃ§a sempre\nâ€¢ Divida responsabilidades\nâ€¢ E inspire pelo exemplo\n\nðŸ’¬ "Sozinhos, vamos mais rÃ¡pido. Juntos, vamos mais longe."\n\nâœ… MÃ³dulo concluÃ­do!'
                  );
                }, 4000);
                setTimeout(() => {
                  addBotMessage('Quer explorar outro mÃ³dulo?', [
                    { label: 'ðŸŽ¯ Voltar ao menu', value: 'menu' },
                    { label: 'ðŸŒµ Adaptabilidade e ResiliÃªncia', value: 'ir_adaptabilidade' },
                    { label: 'ðŸŒ‰ ComunicaÃ§Ã£o Inclusiva', value: 'ir_comunicacao' }
                  ]);
                  setCurrentStep('modulo_concluido');
                }, 6000);
              }
              else if (currentStep === 'modulo_concluido') {
                if (input === 'menu') {
                  resetToMenu();
                } else if (input === 'ir_adaptabilidade') {
                  setCurrentModule('adaptabilidade');
                  setCurrentStep('adapt_intro');
                  addBotMessage(
                    'Conhece o mandacaru, nÃ©? Aquele que cresce firme no meio da seca, mas quando a chuva vem, floresce bonito? ðŸŒµ\n\nPois Ã©, hoje a conversa Ã© sobre ser assim tambÃ©m: resistente e cheio de vida!\n\nNa vida, nem tudo sai como a gente planeja.\nÃ€s vezes o patrÃ£o muda o horÃ¡rio, a venda cai, o Ã´nibus atrasa, ou aparece um problema que ninguÃ©m esperava.'
                  );
                  setTimeout(() => {
                    addBotMessage('Quando aparece um imprevisto, qual dessas frases parece mais com vocÃª?', [
                      { label: 'Desespero logo, fico sem saber o que fazer ðŸ˜°', value: 'desespero' },
                      { label: 'Reclamo, mas depois dou um jeito ðŸ˜…', value: 'reclamo' },
                      { label: 'Penso positivo e me viro como posso ðŸ’ª', value: 'pensopositivo' }
                    ], 1500);
                  }, 1000);
                } else if (input === 'ir_comunicacao') {
                  setCurrentModule('comunicacao');
                  setCurrentStep('com_intro');
                  addBotMessage('Em breve: Trilha de ComunicaÃ§Ã£o completa!');
                }
              }
              return;
            }

            // Fluxo da trilha de Adaptabilidade
            if (currentModule === 'adaptabilidade') {
              if (currentStep === 'adapt_intro') {
                let response = '';
                if (input === 'desespero') response = 'Acontece demais, visse? O segredo Ã© aprender a respirar e pensar no que dÃ¡ pra fazer, em vez de sÃ³ se preocupar.';
                else if (input === 'reclamo') response = 'Rapaz, jÃ¡ Ã© meio caminho andado! Quem reclama, mas se vira, jÃ¡ tÃ¡ praticando adaptabilidade.';
                else if (input === 'pensopositivo') response = 'Arretado! Essa Ã© a forÃ§a do nordestino: atÃ© tropeÃ§a, mas nÃ£o cai.';
                
                addBotMessage(response);
                setTimeout(() => {
                  addBotMessage(
                    'Deixa eu te falar um pouco sobre esse negÃ³cio de adaptabilidade e resiliÃªncia...\n\nSÃ£o duas palavras que parecem difÃ­ceis, mas tÃªm um significado simples.\n\n**Adaptabilidade** - Ã© quando a gente muda o jeito de fazer, mas sem perder o rumo.\n\n**ResiliÃªncia** - Ã© quando a vida dÃ¡ pancada e a gente se levanta mais forte.\n\nÃ‰ tipo o cabra que planta: se a chuva nÃ£o vem, ele muda o tempo do plantio, mas nÃ£o desiste da roÃ§a.'
                  );
                  setCurrentStep('adapt_historia');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    'Deixa eu te contar o caso de **dona Tereza**, costureira aqui do interior. ðŸ§µ\n\nQuando veio a pandemia, as encomendas de roupa pararam.\nMas em vez de cruzar os braÃ§os, ela comeÃ§ou a costurar mÃ¡scara de pano.\nNo comeÃ§o, nÃ£o vendia muito, mas ela insistiu â€” e deu certo!\n\nHoje, tÃ¡ com a lojinha dela de novo, firme e sorridente. ðŸ˜Š'
                  );
                }, 4000);
                setTimeout(() => {
                  addBotMessage('E vocÃª, jÃ¡ passou por uma situaÃ§Ã£o em que precisou se reinventar?', [
                    { label: 'Sim, e aprendi muito com isso', value: 'sim_aprendi' },
                    { label: 'Sim, mas foi difÃ­cil demais', value: 'sim_dificil' },
                    { label: 'Ainda nÃ£o, mas sei que o dia chega', value: 'ainda_nao' }
                  ]);
                }, 6000);
              }
              else if (currentStep === 'adapt_historia') {
                let respReinvencao = '';
                if (input === 'sim_aprendi') respReinvencao = 'Que beleza! Cada queda Ã© uma liÃ§Ã£o valiosa.';
                else if (input === 'sim_dificil') respReinvencao = 'Eu sei que nÃ£o Ã© fÃ¡cil, mas vocÃª passou por isso e tÃ¡ aqui, firme.';
                else if (input === 'ainda_nao') respReinvencao = 'Pois Ã©! A vida Ã© assim, o importante Ã© estar preparado.';
                
                addBotMessage(respReinvencao);
                setTimeout(() => {
                  addBotMessage(
                    'Pois Ã©, meu amigo(a). A vida Ã© assim: cada queda Ã© uma liÃ§Ã£o.\nO importante Ã© nÃ£o deixar o medo te secar, igual mandacaru que guarda forÃ§a pra florescer.\n\n**Desafio do Mandacaru** ðŸŒµ\n\nAgora quero te lanÃ§ar um desafio.\nPensa em uma situaÃ§Ã£o difÃ­cil que vocÃª tÃ¡ passando, pode ser no trabalho, em casa ou no coraÃ§Ã£o.\n\nAgora se pergunte:\nâ€¢ O que ainda dÃ¡ pra fazer nessa situaÃ§Ã£o?\nâ€¢ Que coisa pequena eu posso mudar hoje pra melhorar?'
                  );
                  setCurrentStep('adapt_desafio');
                }, 2000);
                setTimeout(() => {
                  addBotMessage('VocÃª aceita esse desafio de reflexÃ£o?', [
                    { label: 'Aceito, vou refletir sobre isso', value: 'aceito' },
                    { label: 'Vou pensar depois', value: 'depois' }
                  ]);
                }, 4000);
              }
              else if (currentStep === 'adapt_desafio') {
                let respDesafio = input === 'aceito'
                  ? 'Que resposta boa! Isso Ã© coragem. Continue firme, um passo por vez.'
                  : 'Mesmo que seja difÃ­cil, sÃ³ de pensar diferente jÃ¡ Ã© sinal de forÃ§a, visse?';
                
                addBotMessage(respDesafio);
                setTimeout(() => {
                  addBotMessage(
                    'Ser resiliente nÃ£o Ã© fingir que tÃ¡ tudo bem.\nÃ‰ admitir que doeu, aprender com o tombo e levantar com mais sabedoria.\n\nQual dessas frases combina mais com sua forma de ver a vida?',
                    [
                      { label: 'Tudo dÃ¡ certo no fim', value: 'da_certo' },
                      { label: 'O que nÃ£o mata, ensina', value: 'ensina' },
                      { label: 'Melhor rir do que chorar', value: 'rir' }
                    ]
                  );
                  setCurrentStep('adapt_final');
                }, 2000);
              }
              else if (currentStep === 'adapt_final') {
                addBotMessage('Qualquer uma dessas jÃ¡ mostra um olhar positivo, meu povo.\nO importante Ã© nÃ£o se entregar, a gente pode atÃ© cansar, mas nÃ£o quebra!');
                setTimeout(() => {
                  addBotMessage(
                    'EntÃ£o, meu povo, quando a vida apertar **seja como o mandacaru** ðŸŒµ\n\nAguente firme e depois floresÃ§a bonito, siga confiante.\n\nâœ… MÃ³dulo concluÃ­do!'
                  );
                  setCurrentStep('modulo_concluido');
                }, 2000);
                setTimeout(() => {
                  addBotMessage('Quer explorar outro mÃ³dulo?', [
                    { label: 'ðŸŽ¯ Voltar ao menu', value: 'menu' },
                    { label: 'ðŸŒ‰ ComunicaÃ§Ã£o Inclusiva', value: 'ir_comunicacao' },
                    { label: 'ðŸ Produtividade', value: 'ir_produtividade' }
                  ]);
                }, 4000);
              }
              else if (currentStep === 'modulo_concluido') {
                if (input === 'menu') {
                  resetToMenu();
                } else if (input === 'ir_comunicacao') {
                  setCurrentModule('comunicacao');
                  setCurrentStep('com_intro');
                  addBotMessage(
                    'Me diga uma coisaâ€¦ vocÃª jÃ¡ tentou explicar algo pra alguÃ©m e a pessoa entendeu tudinho errado?\n\nOu falou com outra pessoa e parecia que ela tava falando outra lÃ­ngua?\n\nPois Ã©â€¦ comunicaÃ§Ã£o nÃ£o Ã© sÃ³ falar.\nÃ‰ fazer o outro compreender.'
                  );
                  setTimeout(() => {
                    addBotMessage('E quando vocÃª conversa com pessoas de idades diferentes, jovens, adultos, idosos, como Ã© que vocÃª costuma agir?', [
                      { label: 'Falo do mesmo jeito com todo mundo', value: 'mesmo_jeito' },
                      { label: 'Tento mudar o jeito de explicar', value: 'mudo_jeito' },
                      { label: 'Fico meio perdido, sem saber como falar', value: 'perdido' }
                    ], 1500);
                  }, 1000);
                } else if (input === 'ir_produtividade') {
                  setCurrentModule('produtividade');
                  setCurrentStep('prod_intro');
                  addBotMessage(
                    'Me diga uma coisaâ€¦ jÃ¡ teve dia que vocÃª trabalhou o dia todinho e no fim pensou:\n\n"Oxente, fiz tanto e parece que nÃ£o fiz nada"? ðŸ˜…\n\nPois Ã©! Ã€s vezes a gente corre demais e esquece de pensar se tÃ¡ correndo pro lado certo.\nProdutividade nÃ£o Ã© fazer tudo â€” Ã© fazer o que realmente importa.'
                  );
                  setTimeout(() => {
                    addBotMessage('E quando as tarefas acumulam, como Ã© que vocÃª reage?', [
                      { label: 'Fico agoniado e tento resolver tudo de uma vez ðŸ˜°', value: 'a' },
                      { label: 'FaÃ§o o que dÃ¡, um de cada vez ðŸ˜…', value: 'b' },
                      { label: 'Me organizo e planejo o que Ã© mais importante ðŸ’ª', value: 'c' }
                    ], 1500);
                  }, 1000);
                }
              }
              return;
            }

            // Fluxo da trilha de ComunicaÃ§Ã£o
            if (currentModule === 'comunicacao') {
              if (currentStep === 'com_intro') {
                let response = '';
                if (input === 'mesmo_jeito') response = 'Ã€s vezes funciona, visse? Mas nem todo mundo entende as coisas do mesmo jeito.';
                else if (input === 'mudo_jeito') response = 'Arretado! Isso jÃ¡ Ã© comunicaÃ§Ã£o inclusiva: adaptar sem perder respeito.';
                else if (input === 'perdido') response = 'Normal demais! ComunicaÃ§Ã£o Ã© treino, ninguÃ©m nasce sabendo.';
                
                addBotMessage(response);
                setTimeout(() => {
                  addBotMessage(
                    'EntÃ£oâ€¦ o que Ã© **ComunicaÃ§Ã£o Inclusiva?**\n\nÃ‰ quando a gente conversa de um jeito que todo mundo entende e se sente respeitado, independente de idade, cultura, escolaridade, deficiÃªncia, sotaque ou jeito de viver.\n\nComunicaÃ§Ã£o inclusiva Ã©:\nâœ” Clara\nâœ” EmpÃ¡tica\nâœ” Respeitosa\nâœ” Acolhedora\nâœ” Sem preconceitos\nâœ” Sem termos confusos\n\nÃ‰ falar com o coraÃ§Ã£o, nÃ£o sÃ³ com a boca. â¤ï¸'
                  );
                  setCurrentStep('com_conceitos');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    'E o que Ã© **ComunicaÃ§Ã£o Geracional?**\n\nÃ‰ saber conversar com pessoas de diferentes geraÃ§Ãµes, entendendo que cada uma tem seu ritmo:\n\nðŸ‘µ GeraÃ§Ã£o mais velha: valoriza calma, respeito, olho no olho.\nðŸ§‘ GeraÃ§Ã£o adulta: gosta de objetividade.\nðŸ§‘â€ðŸŽ“ GeraÃ§Ã£o jovem: quer dinamismo, exemplos prÃ¡ticos e linguagem mais leve.\n\nNÃ£o Ã© mudar quem vocÃª Ã© â€” Ã© saber se ajustar pra conectar.'
                  );
                }, 4000);
                setTimeout(() => {
                  addBotMessage(
                    'Deixa eu te contar o caso de **Seu Raimundo e LÃ­via**, lÃ¡ da feira de Caruaru. ðŸŽª\n\nSeu Raimundo, 68 anos, vende cordel desde menino.\nLÃ­via, 19, chegou pra ajudar o avÃ´ a divulgar os folhetos.\n\nEle falava: "Minha fia, posta meus cordel no telefone desse povo aÃ­."\nMas LÃ­via nÃ£o entendia o jeito dele explicar.\nE ele nÃ£o entendia nada do jeito moderno dela falar.\n\nAtÃ© que um dia, ela sentou e disse:\n"VÃ´, me diga do jeitinho do senhor: o que o senhor quer mostrar pras pessoas?"\n\nEle explicou com calma. Ela traduziu pro mundo digital.\nE pronto: juntaram tradiÃ§Ã£o e modernidade.\nHoje os cordÃ©is dele vendem atÃ© pra fora do paÃ­s! ðŸ“±ðŸŒ\n\nIsso Ã© comunicaÃ§Ã£o geracional funcionando:\ncada um falando do seu jeito, mas se ouvindo com respeito.'
                  );
                }, 6000);
                setTimeout(() => {
                  addBotMessage('Quando vocÃª percebe que alguÃ©m nÃ£o entendeu o que vocÃª disse, vocÃª faz o quÃª?', [
                    { label: 'Repito do mesmo jeito', value: 'repito' },
                    { label: 'Explico de outra forma', value: 'outra_forma' },
                    { label: 'PeÃ§o pra pessoa dizer o que entendeu', value: 'peco_repetir' }
                  ]);
                }, 8000);
              }
              else if (currentStep === 'com_conceitos') {
                let respEntendimento = '';
                if (input === 'repito') respEntendimento = 'Ã€s vezes precisa mudar o caminho pra chegar no mesmo lugar.';
                else if (input === 'outra_forma') respEntendimento = 'Isso aÃ­! ComunicaÃ§Ã£o boa Ã© igual Ã¡gua de rio: contorna, mas chega.';
                else if (input === 'peco_repetir') respEntendimento = 'Excelente! Pedir pra pessoa repetir Ã© uma tÃ©cnica profissional de comunicaÃ§Ã£o inclusiva.';
                
                addBotMessage(respEntendimento);
                setTimeout(() => {
                  addBotMessage('Agora responda com sinceridade:\nVocÃª costuma ouvir mais ou falar mais?', [
                    { label: 'Eu falo muito', value: 'falo' },
                    { label: 'Eu escuto, mas Ã s vezes me perco', value: 'escuto_perco' },
                    { label: 'Eu escuto mais que falo', value: 'escuto' }
                  ]);
                  setCurrentStep('com_escuta');
                }, 2000);
              }
              else if (currentStep === 'com_escuta') {
                let respEscuta = '';
                if (input === 'falo') respEscuta = 'Eiita! EntÃ£o bora treinar a escuta ativa.';
                else if (input === 'escuto_perco') respEscuta = 'Normal! Escutar tambÃ©m Ã© prÃ¡tica.';
                else if (input === 'escuto') respEscuta = 'Que beleza! Quem escuta bem se comunica melhor.';
                
                addBotMessage(respEscuta);
                setTimeout(() => {
                  addBotMessage(
                    '**Dica de Ouro:** ðŸ’¡\n\nComunicaÃ§Ã£o inclusiva comeÃ§a com duas perguntas mÃ¡gicas:\n\nðŸ”¹ "SerÃ¡ que a pessoa entendeu?"\nðŸ”¹ "SerÃ¡ que a forma como falei acolheu ou afastou?"\n\nSe acolheu: continue.\nSe afastou: ajuste o tom.'
                  );
                  setCurrentStep('com_desafio');
                }, 2000);
                setTimeout(() => {
                  addBotMessage(
                    '**Desafio da Ponte do Entendimento** ðŸžï¸\n\nHoje, tente conversar com alguÃ©m de outra geraÃ§Ã£o (mais novo ou mais velho) e faÃ§a assim:\n\n1ï¸âƒ£ Fale com calma\n2ï¸âƒ£ Use palavras simples\n3ï¸âƒ£ Pergunte se ficou claro\n4ï¸âƒ£ OuÃ§a sem interromper\n\nDepois pense: "A ponte ficou forte ou ficou faltando madeira?"\n\nVocÃª aceita esse desafio?',
                    [
                      { label: 'Aceito! Vou fazer isso', value: 'aceito' },
                      { label: 'Vou tentar', value: 'vou_tentar' }
                    ]
                  );
                }, 4000);
              }
              else if (currentStep === 'com_desafio') {
                let respDesafio = input === 'aceito'
                  ? 'Excelente! Esse Ã© o espÃ­rito da comunicaÃ§Ã£o inclusiva.'
                  : 'Ã“timo! Cada tentativa jÃ¡ Ã© um passo importante.';
                
                addBotMessage(respDesafio);
                setTimeout(() => {
                  addBotMessage('E pra encerrar essa prosa, me diga qual frase combina mais com sua forma de se comunicar:', [
                    { label: 'Cada pessoa tem seu jeito de entender', value: 'cada_pessoa' },
                    { label: 'Falar Ã© fÃ¡cil, difÃ­cil Ã© se fazer entender', value: 'dificil' },
                    { label: 'Quem conversa se entende', value: 'conversa' }
                  ]);
                  setCurrentStep('com_final');
                }, 2000);
              }
              else if (currentStep === 'com_final') {
                addBotMessage('Tanto faz a frase, todas mostram que vocÃª jÃ¡ percebeu o caminho:\ncomunicaÃ§Ã£o boa Ã© aquela que aproxima, nÃ£o que separa.');
                setTimeout(() => {
                  addBotMessage(
                    'Assim como a ponte liga um lado ao outro, a comunicaÃ§Ã£o liga uma pessoa Ã  outra.\n\nE quando Ã© inclusiva e respeitosa, ah meu amigoâ€¦ aÃ­ ninguÃ©m fica pra trÃ¡s. ðŸŒ‰\n\nâœ… MÃ³dulo concluÃ­do!'
                  );
                  setCurrentStep('modulo_concluido');
                }, 2000);
                setTimeout(() => {
                  addBotMessage('ParabÃ©ns! VocÃª completou todas as trilhas! ðŸŽ‰\n\nQuer revisar algum conteÃºdo?', [
                    { label: 'ðŸŽ¯ Voltar ao menu', value: 'menu' },
                    { label: 'ðŸ Produtividade', value: 'ir_produtividade' },
                    { label: 'âš½ LideranÃ§a', value: 'ir_lideranca' },
                    { label: 'ðŸŒµ Adaptabilidade', value: 'ir_adaptabilidade' }
                  ]);
                }, 4000);
              }
              else if (currentStep === 'modulo_concluido') {
                if (input === 'menu') {
                  resetToMenu();
                } else if (input === 'ir_produtividade') {
                  setCurrentModule('produtividade');
                  setCurrentStep('prod_intro');
                  addBotMessage(
                    'Me diga uma coisaâ€¦ jÃ¡ teve dia que vocÃª trabalhou o dia todinho e no fim pensou:\n\n"Oxente, fiz tanto e parece que nÃ£o fiz nada"? ðŸ˜…\n\nPois Ã©! Ã€s vezes a gente corre demais e esquece de pensar se tÃ¡ correndo pro lado certo.\nProdutividade nÃ£o Ã© fazer tudo â€” Ã© fazer o que realmente importa.'
                  );
                  setTimeout(() => {
                    addBotMessage('E quando as tarefas acumulam, como Ã© que vocÃª reage?', [
                      { label: 'Fico agoniado e tento resolver tudo de uma vez ðŸ˜°', value: 'a' },
                      { label: 'FaÃ§o o que dÃ¡, um de cada vez ðŸ˜…', value: 'b' },
                      { label: 'Me organizo e planejo o que Ã© mais importante ðŸ’ª', value: 'c' }
                    ], 1500);
                  }, 1000);
                } else if (input === 'ir_lideranca') {
                  setCurrentModule('lideranca');
                  setCurrentStep('lid_intro');
                  addBotMessage(
                    'Rapaz, jÃ¡ viu como Ã© puxado liderar gente diferente?\nCada um pensa de um jeito, fala de outro e reage de outro.\nMas Ã© aÃ­ que mora a beleza: liderar Ã© entender pessoas, nÃ£o controlar tarefas.\n\nBora bater um papo sobre isso?'
                  );
                  setTimeout(() => {
                    addBotMessage('Quando vocÃª pensa em um bom lÃ­der, o que vem na cabeÃ§a?', [
                      { label: 'DÃ¡ o exemplo', value: 'exemplo' },
                      { label: 'Escuta e apoia', value: 'escuta' },
                      { label: 'Motiva o grupo', value: 'motiva' },
                      { label: 'Cobra demais', value: 'cobra' }
                    ], 1500);
                  }, 1000);
                } else if (input === 'ir_adaptabilidade') {
                  setCurrentModule('adaptabilidade');
                  setCurrentStep('adapt_intro');
                  addBotMessage(
                    'Conhece o mandacaru, nÃ©? Aquele que cresce firme no meio da seca, mas quando a chuva vem, floresce bonito? ðŸŒµ\n\nPois Ã©, hoje a conversa Ã© sobre ser assim tambÃ©m: resistente e cheio de vida!\n\nNa vida, nem tudo sai como a gente planeja.\nÃ€s vezes o patrÃ£o muda o horÃ¡rio, a venda cai, o Ã´nibus atrasa, ou aparece um problema que ninguÃ©m esperava.'
                  );
                  setTimeout(() => {
                    addBotMessage('Quando aparece um imprevisto, qual dessas frases parece mais com vocÃª?', [
                      { label: 'Desespero logo, fico sem saber o que fazer ðŸ˜°', value: 'desespero' },
                      { label: 'Reclamo, mas depois dou um jeito ðŸ˜…', value: 'reclamo' },
                      { label: 'Penso positivo e me viro como posso ðŸ’ª', value: 'pensopositivo' }
                    ], 1500);
                  }, 1000);
                }
              }
              return;
            }

            // Outros mÃ³dulos ou voltar ao menu
            if (input === 'menu') {
              resetToMenu();
            } else if (input === 'ir_produtividade') {
              setCurrentModule('produtividade');
              setCurrentStep('prod_intro');
              addBotMessage(
                'Me diga uma coisaâ€¦ jÃ¡ teve dia que vocÃª trabalhou o dia todinho e no fim pensou:\n\n"Oxente, fiz tanto e parece que nÃ£o fiz nada"? ðŸ˜…\n\nPois Ã©! Ã€s vezes a gente corre demais e esquece de pensar se tÃ¡ correndo pro lado certo.\nProdutividade nÃ£o Ã© fazer tudo â€” Ã© fazer o que realmente importa.'
              );
              setTimeout(() => {
                addBotMessage('E quando as tarefas acumulam, como Ã© que vocÃª reage?', [
                  { label: 'Fico agoniado e tento resolver tudo de uma vez ðŸ˜°', value: 'a' },
                  { label: 'FaÃ§o o que dÃ¡, um de cada vez ðŸ˜…', value: 'b' },
                  { label: 'Me organizo e planejo o que Ã© mais importante ðŸ’ª', value: 'c' }
                ], 1500);
              }, 1000);
            } else if (input === 'ir_lideranca') {
              setCurrentModule('lideranca');
              setCurrentStep('lid_intro');
              addBotMessage(
                'Rapaz, jÃ¡ viu como Ã© puxado liderar gente diferente?\nCada um pensa de um jeito, fala de outro e reage de outro.\nMas Ã© aÃ­ que mora a beleza: liderar Ã© entender pessoas, nÃ£o controlar tarefas.\n\nBora bater um papo sobre isso?'
              );
              setTimeout(() => {
                addBotMessage('Quando vocÃª pensa em um bom lÃ­der, o que vem na cabeÃ§a?', [
                  { label: 'DÃ¡ o exemplo', value: 'exemplo' },
                  { label: 'Escuta e apoia', value: 'escuta' },
                  { label: 'Motiva o grupo', value: 'motiva' },
                  { label: 'Cobra demais', value: 'cobra' }
                ], 1500);
              }, 1000);
            } else if (input === 'ir_adaptabilidade') {
              setCurrentModule('adaptabilidade');
              setCurrentStep('adapt_intro');
              addBotMessage(
                'Conhece o mandacaru, nÃ©? Aquele que cresce firme no meio da seca, mas quando a chuva vem, floresce bonito? ðŸŒµ\n\nPois Ã©, hoje a conversa Ã© sobre ser assim tambÃ©m: resistente e cheio de vida!\n\nNa vida, nem tudo sai como a gente planeja.\nÃ€s vezes o patrÃ£o muda o horÃ¡rio, a venda cai, o Ã´nibus atrasa, ou aparece um problema que ninguÃ©m esperava.'
              );
              setTimeout(() => {
                addBotMessage('Quando aparece um imprevisto, qual dessas frases parece mais com vocÃª?', [
                  { label: 'Desespero logo, fico sem saber o que fazer ðŸ˜°', value: 'desespero' },
                  { label: 'Reclamo, mas depois dou um jeito ðŸ˜…', value: 'reclamo' },
                  { label: 'Penso positivo e me viro como posso ðŸ’ª', value: 'pensopositivo' }
                ], 1500);
              }, 1000);
            }
          };

          const resetToMenu = () => {
            setCurrentModule(null);
            setCurrentStep('selectModule');
            addBotMessage(`${userName}, escolha uma trilha para continuar:`);
          };

          const handleOptionClick = (option) => {
            addUserMessage(option.label);
            handleUserInput(option.value);
          };

          const handleSendClick = () => {
            if (inputRef.current && inputRef.current.value.trim()) {
              handleUserInput(inputRef.current.value.trim());
              inputRef.current.value = '';
            }
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter') {
              handleSendClick();
            }
          };

          return (
            <div className="container">
              <div className="card">
                <div className="header">
                  <div className="header-content">
                    <div className="icon-container">
                      <MessageCircle />
                    </div>
                    <div>
                      <h1 className="header-title">Trilhas de Desenvolvimento</h1>
                      <p className="header-subtitle">
                        {currentModule ? modules[currentModule].name : 'Escolha seu caminho de aprendizado'}
                      </p>
                    </div>
                  </div>
                  {userName && (
                    <div className="user-info">
                      <p className="user-label">OlÃ¡,</p>
                      <p className="user-name">{userName}</p>
                    </div>
                  )}
                </div>

                <div className="messages-container">
                  {messages.map((message, index) => (
                    <div key={index} className={`message-wrapper ${message.type}`}>
                      <div className="message">
                        <div className={`message-bubble ${message.type}`}>
                          {message.text}
                        </div>
                        <p className={`message-timestamp ${message.type}`}>
                          {message.timestamp}
                        </p>
                        
                        {message.options && message.type === 'bot' && index === messages.length - 1 && (
                          <div className="options-container">
                            {message.options.map((option, optIndex) => (
                              <button
                                key={optIndex}
                                onClick={() => handleOptionClick(option)}
                                className="option-button"
                              >
                                {option.label}
                              </button>
                            ))}
                          </div>
                        )}
                      </div>
                    </div>
                  ))}

                  {currentStep === 'selectModule' && !waitingForResponse && !currentModule && (
                    <div className="modules-grid">
                      {Object.entries(modules).map(([key, module]) => {
                        const Icon = module.icon;
                        return (
                          <div
                            key={key}
                            onClick={() => handleUserInput(key)}
                            className="module-card"
                          >
                            <div className={`module-icon ${module.color}`}>
                              <Icon />
                            </div>
                            <div className="module-content">
                              <div className="module-header">
                                <h3 className="module-title">{module.name}</h3>
                                <span className="module-emoji">{module.emoji}</span>
                              </div>
                              <p className="module-description">
                                {module.description}
                              </p>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  )}

                  {waitingForResponse && (
                    <div className="typing-indicator">
                      <div className="typing-bubble">
                        <div className="typing-dot"></div>
                        <div className="typing-dot"></div>
                        <div className="typing-dot"></div>
                      </div>
                    </div>
                  )}

                  <div ref={messagesEndRef} />
                </div>

                <div className="input-area">
                  {currentStep === 'menu' && !userName ? (
                    <div className="input-container">
                      <input
                        ref={inputRef}
                        type="text"
                        placeholder="Digite seu nome..."
                        className="text-input"
                        onKeyPress={handleKeyPress}
                        autoFocus
                      />
                      <button onClick={handleSendClick} className="send-button">
                        Enviar
                      </button>
                    </div>
                  ) : (
                    <p className="info-text">
                      ðŸ’¡ Dica: Leia com atenÃ§Ã£o e escolha as opÃ§Ãµes que mais combinam com vocÃª!
                    </p>
                  )}
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ChatbotTrilhas />);
    </script>
</body>
</html>
